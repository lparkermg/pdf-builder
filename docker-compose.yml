services:
  pdfbuilder-api:
    build:
      context: .
      dockerfile: ./docker/api/Dockerfile
    environment:
      - ASPNETCORE_ENVIRONMENT=Development
      - ASPNETCORE_URLS=http://+:5117
      - ASPNETCORE_Kestrel__Certificates__Default__Password=pAs5w0rd
      - ASPNETCORE_Kestrel__Certificates__Default__Path=/https/aspnetapp.pfx
    ports:
      - "5117:5117"
    volumes:
      - ${USERPROFILE}\.aspnet\https:/https/:ro
    networks:
      pdfbuilder_net:

  pdfbuilder-builder:
    build:
      context: .
      dockerfile: ./docker/builder/Dockerfile
    environment:
      - ASPNETCORE_ENVIRONMENT=Development
      - ASPNETCORE_URLS=https://+:5001
      - ASPNETCORE_Kestrel__Certificates__Default__Password=pAs5w0rd
      - ASPNETCORE_Kestrel__Certificates__Default__Path=/https/aspnetapp.pfx
      - PDFBUILDER_SERVICE_Assets__TemplatesManifest=/assets/manifests/templates.json
      - PDFBUILDER_SERVICE_Assets__ThemesManifest=/assets/manifests/themes.json
    volumes:
      - ${USERPROFILE}\.aspnet\https:/https/:ro
      - .\assets-example:/assets/:ro
    networks:
      pdfbuilder_net:
    
networks:
  pdfbuilder_net: